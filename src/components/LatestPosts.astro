---
import { getCollection } from "astro:content";
import PostCard from "./PostCard.astro";

const allPosts = await getCollection("posts");
const latestPosts = allPosts
	.sort((a, b) => b.data.publishDate.getTime() - a.data.publishDate.getTime())
	.slice(0, 3); // Showing max 3 posts
---

<section>
  <h2 class="text-4xl font-bold">Latest Posts</h2>
  
  {latestPosts.length === 0 ? (
    <p class="text-center text-brand-text-sub">No posts published yet. Check back soon!</p>
  ) : (
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
      {latestPosts.map((post) => (
        <PostCard 
          title={post.data.title}
          slug={post.slug}
          description={post.data.description}
          publishDate={post.data.publishDate}
        />
      ))}
    </div>
  )}
</section>
