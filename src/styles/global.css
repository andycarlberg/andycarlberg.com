@import "tailwindcss";
@plugin "@tailwindcss/typography";

@custom-variant dark (&:where(.dark, .dark *));

@theme {
  /* --- Typography Definitions --- */
  --font-sans: Inter, sans-serif, ui-sans-serif, system-ui; /* Body copy */
  --font-display: Poppins, sans-serif, ui-sans-serif, system-ui; /* Headings */
  --font-mono: Fira Code, SFMono-Regular, Menlo, monospace; /* Code */

  --leading-relaxed: 1.625; /* Custom line-height for readability */

  /* --- Color Definitions (Light Mode Defaults) --- */
  --color-primary: #2563eb;          /* Vibrant Blue */
  --color-accent: #14b8a6;           /* Teal */
  --color-surface-base: #ffffff;      /* Pure white background */
  --color-surface-secondary: #f8fafc; /* Off-white secondary background */
  --color-text-main: #1f2937;        /* Dark gray for primary text */
  --color-text-sub: #6b7280;         /* Medium gray for secondary text */

  /* --- Utility Class Mapping --- */
  --color-brand-primary: var(--color-primary);
  --color-brand-accent: var(--color-accent);
  --color-brand-base: var(--color-surface-base); /* Generates: bg-brand-base */
  --color-brand-secondary: var(--color-surface-secondary); /* Generates: bg-brand-secondary */
  --color-brand-text-main: var(--color-text-main); /* Generates: text-brand-text-main */
  --color-brand-text-sub: var(--color-text-sub); /* Generates: text-brand-text-sub */
}

/* Global Dark Mode Overrides */
.dark {
  --color-primary: #3b82f6;          /* Lighter Indigo for brand */
  --color-accent: #34d399;           /* Lighter Green/Teal for highlights */
  --color-surface-base: #0f172a;      /* Deep blue-gray for main background */
  --color-surface-secondary: #1e293b; /* Slightly lighter background */
  --color-text-main: #f3f4f6;        /* Near-white for primary text */
  --color-text-sub: #9ca3af;         /* Light gray for secondary text */
}

/* Prose Overrides */
.prose {
  /* Headings (H1-H6 inside prose) */
  --tw-prose-headings: var(--color-text-main);
  
  /* Links */
  --tw-prose-links: var(--color-primary);
  --tw-prose-link-hover: var(--color-accent);
  
  /* Strong/Bold text inside prose */
  --tw-prose-bold: var(--color-brand-primary);
  
  /* Blockquote text and border */
  --tw-prose-quotes: var(--color-text-sub);
  --tw-prose-quote-borders: var(--color-text-sub);

  /* Code (inline and block) */
  --tw-prose-code: var(--color-text-main);
  --tw-prose-code-bg: var(--color-surface-secondary);
}

.dark .prose {
  --tw-prose-links: var(--color-primary);
  --tw-prose-link-hover: var(--color-accent);
}

@layer base {
  /* Global Body Defaults */
  body {
    @apply font-sans text-lg leading-relaxed bg-brand-base text-brand-text-main antialiased;
  }
  
  /* Headings (H1 - H6) - Poppins and responsive scale */
  h1 {
    @apply font-display text-4xl font-extrabold leading-tight md:text-6xl text-brand-text-main mt-12 mb-4;
  }
  
  h2 {
    @apply font-display text-3xl font-bold leading-snug md:text-5xl text-brand-text-main mt-10 mb-3;
  }
  
  h3 {
    @apply font-display text-2xl font-semibold leading-normal md:text-4xl text-brand-text-main mt-8 mb-3;
  }
  
  h4 {
    @apply font-display text-xl font-medium leading-normal md:text-3xl text-brand-text-main mt-6 mb-2;
  }
  
  h5 {
    @apply font-display text-lg font-medium leading-normal md:text-2xl text-brand-text-main mt-5 mb-2;
  }
  
  h6 {
    @apply font-display text-base font-medium leading-normal text-brand-text-main mt-4 mb-1;
  }

  h1, h2, h3, h4, h5, h6 {
    strong {
      color: var(--color-primary) !important; /* Override .prose nested element color */
    }
  }
  
  /* Paragraphs and Block Elements */
  p {
    @apply mb-5;
  }

  /* Interactive & Inline Elements */
  a {
    /* Global links outside of prose use brand primary and accent colors */
    @apply text-brand-primary hover:text-brand-accent transition duration-150 ease-in-out;
  }

  blockquote {
    /* Subtle border and text color */
    @apply border-l-4 border-brand-text-sub pl-4 py-1 italic text-brand-text-sub;
  }

  strong {
    @apply text-brand-primary;
  }

  /* Code blocks */
  code {
      /* Uses corrected semantic background color */
      @apply font-mono text-sm bg-brand-secondary text-brand-text-main px-1 py-0.5 rounded;
  }

  pre {
      @apply font-mono bg-brand-secondary p-4 rounded-lg overflow-x-auto;
  }

  /* Lists */
  ul {
    @apply list-disc ml-6 mb-4;
  }

  ol {
    @apply list-decimal ml-6 mb-4;
  }

  li {
    @apply mb-1;
  }
}
